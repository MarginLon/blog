---
title: 导航守卫
date: 2022-09-01 10:21:21
categories: 
  - 《Vue》
tags: 
  - Vue
author: 
  name: MarginLon
  link: https://github.com/MarginLon
permalink: /pages/0217c7/
---

## 全局守卫

### 全局前置守卫

```js
const router = createRouter({ ... })

router.beforeEach((to, from) => {
  // ...
  // 返回 false 以取消导航
  return false
})

router.beforeEach(async (to, from) => {
   if (
     // 检查用户是否已登录
     !isAuthenticated &&
     // ❗️ 避免无限重定向
     to.name !== 'Login'
   ) {
     // 将用户重定向到登录页面
     return { name: 'Login' }
   }
 })
```

## 路由守卫

## 组件守卫

## 执行顺序

- 失活组件 **beforeRouteLeave**（如果有）

- 全局 **beforeEach**  

- 复用组件中，执行 **beforeRouteUpdate()**  

- 路由对象的 **beforeEnter**

- 解析异步导航组件

- 组件 **beforeRouteEnter()**

- 全局 **beforeResolve()**

- 确认导航，页面跳转

- 全局 **afterEach**

- 更新DOM节点

- 执行组件 **beforeRouteEnter**中 **next()** 的回调函数
